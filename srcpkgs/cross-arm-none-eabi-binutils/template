# Template file for 'cross-${_triplet}-${_pkgname}'
_triplet=arm-none-eabi
_pkgname=binutils
pkgname=cross-${_triplet}-${_pkgname}
version=2.39
revision=1
build_style=gnu-configure
configure_args="
 --disable-nls
 --enable-deterministic-archives
 --enable-interwork
 --enable-ld
 --enable-multilib
 --enable-plugins
 --host=${XBPS_CROSS_TRIPLET}
 --prefix=/usr
 --target=${_triplet}
 --with-gnu-as
 --with-gnu-ld
 --with-sysroot=/usr/${_triplet}
 --with-system-zlib
 --without-isl
"
hostmakedepends="automake bison flex perl texinfo"
makedepends="zlib-devel"
depends="binutils-doc"
checkdepends="dejagnu"
short_desc="GNU binary utilities"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://www.gnu.org/software/binutils/"
distfiles="${GNU_SITE}/${_pkgname}/${_pkgname}-${version}.tar.xz"
checksum=645c25f563b8adc0a81dbd6a41cffbf4d37083a382e02d5d3df4f65c09516d00
nocross=yes

post_install() {
	rm -fr ${DESTDIR}/usr/share/info
	# Remove libdep linker plugin because it conflicts with system binutils
	rm -f ${DESTDIR}/usr/lib/bfd-plugins/libdep*
}
